# 인터넷 네트워크.


## 인터넷 통신 

인터넷 통신
IP
TCP, UDP 
PORT 
DNS 

인터넷 상에서 컴퓨터 둘은 어떻게 통신할까요?

클라이언트 - 인터넷 - 서버


## IP 

아이피 주소를 통해서 인터넷 통신이 가능합니다.

클라이언트 - 100.100.100.1
서버 - 200.200.200.2

프로토콜 역할.

지정한 IP 주소(IP Address)에 데이터 전달.
패킷(Packet) 이라는 통신 단위로 데이터 전달.

클라이언트에 패킷을 전달 할 떄 -> 출발 IP, 목적 IP, 메시지
서로 노드끼리 던지면서 결국 최종적으로 미국에 있는 친구 200.200.200.2 까지 도달 하게 됩니다.

IP 프로토콜의 한계.

비연결성 - 패킷을 받을 대상이 없거나 서비스 불능 상태여도 패킷 전송.
비신뢰성 - 중간에 패킷이 사라지면? 패킷이 순서대로 안오면?
프로그램 구분 - 같은 IP를 사용하는 서버에서 통신하는 애플리케이션이 둘 이상이면?

클라인언트측에서는 `대상 서버가 패킷을 받을 수 잇는 상태인지 알 수 없습니다.`
인터넷 망이라는 것이 결국 다 서버들이 거쳐서 연결.

중간에 서버가 문제가 생긴다면? -> 패킷이 유실됩니다.



패킷의 용령이 클 떄가 있습니다.
1500byte 가 넘으면 끊어서 보내 줍니다.

서로 메시지를 1500byte 끊어서 보냅니다.
노드를 타게 되는데, 중간에 서로 다른 노드를 탈 수 있습니다.
그래서 순서가 1 2 로 와야 할 것이 2 1로 오게 됩니다.

이런 문제를 해결 할 수 있는 것이 TCP UDP 프로토콜 입니다.


## TCP UDP 

애플리케이션 - 웹 브라우저, 네트워크 게임, 채팅 프로그램.
            SOCKET 라이브러리.

os - TCP, UDP 
     IP(Internet Protocol)
    
네트워크 인터페이스 - LAN 드라이버, LAN 장비. -> LAN 카드 -> 인터넷 -> 서버 

1. 프로램이 Hello, World! 메시지 생성.
2. SOCKET 라이브러리 통해 전달,.
3. TCP 정보 생성, 메시지 데이터 포함.
4. IP 패킷 생성, TCP 데이터 포함.


패킷 - 택배박스

TCP 순서. 

1. 출발지 IP, 목적지 IP, 기타..
2. 출발지 PORT, 목적지 PORT, 전송 제어, 순서, 검증 정보 ...
3. 전송 데이터 

연결 지향 TCP 3 way handshake - (재랑 나랑 연결 됐는 지 안 됐는 지 확인 할 수 있습니다.)
데이터 전달 보증 - (메시지 보낸 것이 중간에 누락이 된다면? 알 수 있습니다.) 
순서 보장 


TCP 3 way handshake

1. 클라이언트에서 서버로 SYN 보냅니다. 
2. 서버에서 보고 난 후 서버에서 SYN + ACK 를 보내면서 
3. 클라이언튼에서 서버로 ACK 를 보냅니다
4. 데이터 전송

SYN: 접속 요청.
ACK: 요청 수락.

서버에서 응답을 받아 서버에서 요청 수락 메시지를 보내 주므로 -> 재랑 나랑 연결 됐는 지 알 수 있습니다.


순서 보장은 어떻게 해줄까?

1. 패킷1, 패킷2, 패킷 3 순서로 전송.
2. 패킷1, 패킷3, 패킷 2 순서로 도착했습니다.
3. 그럼 서버에서 다시 클라이언트에게 패킷 2부터 다시 보내라고 메시지를 보내줍니다.   



UDP 

UDP 는 기능이 없습니다.
하얀 도화지에 비율.

연결 지향 - TCP 3 way x
데이터 전달 보증 x
순서 보장 x
단순하고 빠름.

UDP 가 왜 쓰지 이게 장점이 있습니다.
TCP 는 3way 핸드 쉐이킹 갈려면 시간이 걸립니다.



## PORT 

한 번에 둘 이상을 연결할려면 어떻게 해야 하냐?
하나의 클라이언트에 게임, 화상통화, 웹 브라우저 요청을 하고 있습니다.

친구랑 게임, 친구랑 화상통화, 쇼핑.
메시지가 어떻게 오느냐? 패킷들이 내 IP 올텐데
각 어떤 패킷이 들어오는 것들을 구분 할 것인가?


TCP 에는 출발지 PORT, 목적지 PORT 가 있습니다.
IP 는 목적지 서버를 찾는 것.
PORT 서버 안에서 돌아가는 애플리케이션들을 구분하는 것들을 말합닏.


게임 - 8090 PORT - 11220
통화 - 21000 PORT - 32202 
웹 브라우저 - 10010 PORT - 80 

서버 IP 는 다르지만 PORT 가 둘다 8080 이면 어떻게? -> TCP 에서는 IP, PORT 둘다 봐서 상관 x


PORT 

0 ~ 65535 할당 가능.
0 ~ 1023 : 잘 알려진 폰트, 사용하지 않는 것이 좋음.

FTP - 20, 21
TELNET - 23
HTTP - 80
HTTPS - 443 


## DNS 

아이피들을 다 기억하기 어렵습니다.
또 문제는 아이피가 변경될 수 있습니다. 

200.200.200.2 서버 IP 를 기억하는데 -> 아이피가 바뀌면?
그래서 도메인 네임 시스템 (DNS) 가 있습니다.

- 전화번호부.
